language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=master
  - secure: DhJpZQRkdBNHxRVRzwqlHcSlZ7UWOhCHOapuf17LTj74waCCx5xMXbH6JLq+QGU9n3y0fb3umyqpW6gBLJQxHRfIloh15jhWL3KOibfsAXlZBWnker4Ot/o+X+Iq+AiAqfZckiYfh6rW/LyQlssYBiDhzrIySjx5GcZYntPcFmh66wD72Ge48fCXP3oz4nDspXFYgTA6CZkHP71GY0NWhX3ugcnpF2Xghqb6XtEIK7vg0zFvSEYFdqa4rdEhfAMnwMSVDYI2rBE43q6zHWH4AejOKCU7ZDS0glYA5Y/3AzDarODj2DFeJrBbicRFK7pNP9S0R+TwmfHhfUtiMgf1VSm0/KGi0axtVNsQb3nHJaZJERERUjr5ERgsXOr1OjkDu22/PPrY7q0zkDZXeJ2QiaYT+M8n4a3ixOBC7uaBHHbFxLG+6LKq2azAXro+hURP/Y4PnwPKeTMsW88Wqe0g2OiFKR7G73vyddxlRhOdHSNdIVKT42H6xizHVhMAGCFtb+b08RgFkZPfI9t2Ypikw89T42kLMfqBDiemIm8dfH+Jwsit25S1G1wQe5EyW1DsVDh3oBiPUPFDA0kYProIxmLlmdIAo9rFpRX4rBZTFRIHb9y1dFPjKr/vYwyk5gGoAIDswQXP44BvIkGErFI8HRqPhtU6nSvsiTIgECsszq4=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
before_install:
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
